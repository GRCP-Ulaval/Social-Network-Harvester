{% extends "MainPage.html" %}
{% load staticfiles %}


{% block extendHead %}
<link rel="stylesheet" href='{% static "css/settings_page.css" %}?v={{ STATICFILES_VERSION }}' name="style">
<script src='{% static "js/settings_page.js" %}?v={{ STATICFILES_VERSION }}'></script>
<script type="text/javascript" src='{% static "js/script_facebook.js" %}?v={{ STATICFILES_VERSION }}'></script>
<script>
    var facebookAppId       =    '{{ FACEBOOK_APP_PARAMS.app_id }}';
    var facebookAppVersion  =    '{{ FACEBOOK_APP_PARAMS.version }}';
    var csrf_token          =    '{{ csrf_token }}';
    var fbAccessToken       =    '{{ fbAccessToken }}';
</script>
{% endblock %}
{% block content %}
<div id="content">
    <form id="settings_form" action="/user/edit_user_settings" method="post">{% csrf_token %}
        <!-- GENERAL SETTINGS -->
        <div class="settings_box">
            <div class="section_menu">
                <div class="category_title">
                    <a class="category_opener"><b>Paramètres de {{ user.userProfile }}</b></a>
                </div>
            </div>
            <table style="padding:8px;">
                <tr style="height:26px;">
                    <td>Prénom: </td>
                    <td>
                        <input class=prettyInput type="text" name="u_first_name" value="{{ user.first_name }}" placeholder="Entrez une valeur"/>
                    </td>
                </tr>
                <tr>
                    <td>Nom: </td>
                    <td>
                        <input class=prettyInput type="text" name="u_last_name" value="{{ user.last_name }}"placeholder="Entrez une valeur"/>
                    </td>
                </tr>
                    <td>Adresse email: </td>
                    <td>
                        <input class=prettyInput type="text" name="u_email" value="{{ user.email }}"placeholder="Entrez une valeur"/>
                    </td>
                </tr>
            </table>
        </div>
        <!-- TWITTER SETTINGS -->
        <div class="settings_box">
            <div class="section_menu">
                <div class="category_title">
                   <b>Application Twitter</b>
                </div>
                {% include "tool/tables/tableMenuItems.html" with name="openCloseIcon" %}
            </div>
            <div class="category_content">
                <a class="helpLink" onclick="displayCenterPopup('twitterAppHelp')"> Clickez ici pour de l'aide! </a>
                <!-- TWITTER SETTINGS HELP POPUP -->
                <div class="popup" id="twitterAppHelp">
                    <div id="title">Création d'une application Twitter</div>
                    <div id="help">
                        Suivez ces instructions pour paramètrer votre application Twitter correctement.
                    </div>
                    <div id="content">
                        <embed src="/tools/download?file=Twitter_app_creation_helper_french.pdf" width="1000px"
                               height="800px"/>
                    </div>
                    <script id="functions"></script>
                </div>
                <table>
                    <tr>
                        <td>"Consumer key": </td>
                        <td>
                            <input class=prettyInput type="text" name="p_twitterApp_consumerKey" value="{{ user.userProfile.twitterApp_consumerKey }}" placeholder="Entrez une valeur">
                        </td>
                    </tr>
                    <tr>
                        <td>"Consumer secret":</td>
                        <td>
                            <input class=prettyInput type="text" name="p_twitterApp_consumer_secret" value="{{ user.userProfile.twitterApp_consumer_secret }}" placeholder="Entrez une valeur">
                        </td>
                    </tr>
                    <tr>
                        <td>"Access token key":</td>
                        <td>
                            <input class=prettyInput type="text" name="p_twitterApp_access_token_key" value="{{ user.userProfile.twitterApp_access_token_key }}" placeholder="Entrez une valeur">
                        </td>
                    </tr>
                    <tr>
                        <td>"Access token secret":</td>
                        <td>
                            <input class=prettyInput type="text" name="p_twitterApp_access_token_secret" value="{{ user.userProfile.twitterApp_access_token_secret }}" placeholder="Entrez une valeur">
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <!-- YOUTUBE SETTINGS -->
        <div class="settings_box">
            <div class="section_menu">
                <div class="category_title">
                    <b>Application Youtube</b>
                </div>
                {% include "tool/tables/tableMenuItems.html" with name="openCloseIcon" %}
            </div>
            <div class="category_content">
                <a class="helpLink" onclick="displayCenterPopup('youtubeAppHelp')"> Clickez ici pour de l'aide!</a>
                <!-- YOUTUBE SETTINGS HELP POPUP -->
                <div class="popup" id="youtubeAppHelp">
                    <div id="title">Création d'une application Youtube</div>
                    <div id="help">
                        Suivez ce tutoriel pour paramètrer votre application Youtube correctement.
                    </div>
                    <div id="content">
                        <embed src="/tools/download?file=Youtube_app_creation_help_french.pdf" width="1000px"
                               height="800px">
                    </div>
                    <script id="functions"></script>
                </div>
                <table>
                    <tr>
                        <td>Clé API:</td>
                        <td>
                            <input class=prettyInput type="text" name="p_youtubeApp_dev_key"
                                   value="{{ user.userProfile.youtubeApp_dev_key }}" placeholder="Entrez une valeur">
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <!-- FACEBOOK SETTINGS -->
        <div class="settings_box ">
            <div class="section_menu">
                <div class="category_title">
                    <a class="category_opener"><b>Connexion Facebook</b></a>
                </div>
                {% include "tool/tables/tableMenuItems.html" with name="openCloseIcon" %}
            </div>
            <div class="category_content" style="min-height:150px;">
                Connectez-vous à Facebook (préférablement avec un compte non-personnel) pour permettre au SNH
                d'accéder à du contenu accessible par le grand public.<br><br>
                <center>
                    <div id="notLoggedInMessage" style="color: red;display:none;"><br><br><i>non-connecté</i><br><br><br></div>
                    <div id="custom_login_button" class="facebook_login_logout" onclick=facebookLogIn()
                    style="display:none;">Connection</div>
                    <div id="login_infos_container" style="display:none;">
                        Connecté en tant que : <br><br>
                        <span><img src="" id="userImg"></span>
                        <span><b><div id="user_name" ></div></b></span>
                        <br>
                    </div>
                    <div id="custom_logout_button" class="facebook_login_logout" onclick=facebookLogout()
                           style="display:none;">Déconnexion</div>
                </center>
            </div>
        </div>
        <a href="#">
            <div id="save_button">
                Soumettre les changements
            </div>
        </a>
    </form>
</div>
{% endblock %}