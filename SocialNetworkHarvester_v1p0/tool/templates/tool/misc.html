{% load staticfiles %}
{% load extratags %}

{% if tool == "gridDisplay" %}
<div class="grid">
    {% autoescape off %}
        {{ item|getFieldsValuesAsTiles:currentUser }}
    {% endautoescape %}
</div>
{% endif %}

{% autoescape off %}
{% if tool == "gridDisplayItem" %}
<div class="tooltip grid-item {{ extra_class }}" {{ extra_components }}>

    {% if fieldVal.type == "date" %}
    <div class='value date_value'>
        <span>{{ value }}</span>
    </div>

    {% elif fieldVal.type == "integer" %}
    <div class='value integer_value'>
        {% if strValue|length >= 15 %}
        <span style=" font-size:8px;">
        {% elif strValue|length >= 13 %}
        <span style=" font-size:9px;">
        {% elif strValue|length >= 11 %}
        <span style=" font-size:10px;">
        {% elif strValue|length >= 9 %}
        <span style=" font-size:12px;">
        {% else %}
        <span style=" font-size:18px;">
        {% endif %}
            {{ strValue|truncatechars:75 }}
        </span>
    </div>

    {% elif fieldVal.type == "boolean" %}
    <div class='value boolean_value'>
        {% if strValue == "False" %} <span style='color:red'>Non</span>
        {% elif strValue == "True" %} <span style='color:green'>Oui</span>
        {% endif %}
    </div>

    {% elif fieldVal.type == "short_string" or fieldVal.type == "link_url" %}
    <div class='value string_value'>
        {% if strValue|length >= 60 %}
        <span style=" font-size:8px;">
        {% elif strValue|length >= 30 %}
        <span style=" font-size:10px;">
        {% elif strValue|length >= 10 %}
        <span style=" font-size:12px;">
        {% else %}
        <span style=" font-size:18px;">
        {% endif %}
            {% if fieldVal.type == "link_url" %}
            <a href='{{ value }}' class='TableToolLink' target='_blank'>{{ value|truncatechars:40 }}</a>
            {% else %}
            {{ strValue|truncatechars:40 }}
            {% endif %}
        </span>
    </div>


    {% elif fieldVal.type == "long_string" %}
    <div class='value string_value'>
        <span>{{ value }}</span>
    </div>

    {% elif fieldVal.type == "image_url" %}
    <div class="popup" id="imageBigDisplayPopup">
        <div id="title">{{ fieldVal.name }}</div>
        <div id="help">{{ fieldVal.description }}</div>
        <div id="content">
            <img class="imageBigDisplay" src="{{ value }}"></img>
        </div>
        <script id="functions"></script>
    </div>

    <div class='value image_value'></div>

    {% elif fieldVal.type == "object"%}
    <div class='value object_value'>
        <span>
            <a href='{{ value.getLink }}' class='TableToolLink'>{{ value }}</a>
        </span>
    </div>

    {% elif fieldVal.type == "object_list"%}
    <div class='value object_list_value'>
        <span><ul>
            {% with value.all as values %}
            {% for val in values %}
                <li><a href='{{ val.getLink }}' class='TableToolLink'>{{ val }}</a></li>
            {% endfor %}
            {% endwith %}
        </ul></span>
    </div>

    {% endif %}
    <div class='fieldName'>
        <span>{{ fieldVal.name }}</span>
    </div>
    {% if fieldVal.description %}
    <span class="tooltiptext">{{ fieldVal.description }}</span>
    {% endif %}
</div>
{% endif %}
{% endautoescape %}
